/**
 * saath-aath - Popular Indian Card Game 78.
 * @authors 
 * @version v1.0.0
 * @link https://github.com/abhijitdarji/saath-aath#readme
 * @license ISC
 */
!function(){"use strict";var a="saathaath";angular.module(a,["ngMaterial","ngAnimate","saathaath.card","saathaath.game","saathaath.player"])}(),function(){"use strict";var a="saathaath.card";angular.module(a,[])}(),function(){"use strict";var a="saathaath.game";angular.module(a,[])}(),function(){"use strict";var a="saathaath.player";angular.module(a,[])}(),function(){"use strict";function a(a){var e={restrict:"E",templateUrl:"app/card/card.directive.html",scope:{card:"=",cardIndex:"@",getCard:"&"},controller:"SaathaathCardController",controllerAs:"vm",bindToController:!0};return e}function e(a){var e=this;e.hoverCard=!1,e.toggleHover=function(){e.hoverCard=!e.hoverCard},e.onCardSelected=function(){e.getCard({card:e.card})},e.rank,e.suit,e.init=function(){e.displayCard(),a.$watchCollection("vm.card",function(a,t){e.displayCard()})},e.displayCard=function(){if(e.hideValue)e.suit="back",e.rank="";else{e.rank=e.card.rank;var a;switch(e.card.suit){case"C":a="suitclubs";break;case"D":a="suitdiamonds";break;case"H":a="suithearts";break;case"S":a="suitspades"}e.suit=a}e.cardIndexClass="card-index-"+e.cardIndex},e.init()}var t="saathaath.card",r="saathaathCard",n="SaathaathCardController";angular.module(t).directive(r,a).controller(n,e),a.$inject=["$window"],e.$inject=["$scope"]}(),function(){"use strict";function a(){var a={restrict:"E",template:'<div class="playingCards"><saathaath-card ng-repeat="card in ch.cards track by $index" card="card" card-index="{{$index}}" get-card="ch.callback({card:card})"></saathaath-card></div>',scope:{cards:"=",callback:"&"},controller:function(){},controllerAs:"ch",bindToController:!0};return a}var e="saathaath.card",t="saathaathHand";angular.module(e).directive(t,a)}(),function(){"use strict";function a(){function a(){var a=new e;return a}function e(){var a=this;this.cards=[],this.dealt=[],a.suits.forEach(function(e){a.ranks.forEach(function(r){if(-1===a.ignoredCards.indexOf(r)&&-1===a.ignoredCards.indexOf(r+e)){var n=new t(r,e);a.cards.push(n)}})}),a.shuffle()}function t(a,e){this.rank=a,this.suit=e}var r={newDeck:a,Deck:e,Card:t};return e.prototype.suits=["C","D","S","H"],e.prototype.ranks=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],e.prototype.ignoredCards=["2","3","4","5","6","7C","7D"],e.prototype.deal=function(){var a=this.cards.shift();return angular.isDefined(a)?(this.dealt.push(a),a):!1},e.prototype.shuffle=function(){for(var a,e,t=this.cards.length;0!==t;)e=Math.floor(Math.random()*t),t-=1,a=this.cards[t],this.cards[t]=this.cards[e],this.cards[e]=a},e.prototype.reset=function(){this.cards=this.cards.concat(this.dealt),this.dealt=[],this.shuffle()},t.prototype.name=function(){return this.rank+" "+this.suit},r}var e="saathaath.card",t="CardService";angular.module(e).factory(t,a)}(),function(){"use strict";function a(a,e,t,r){var n=this;n.init=function(){n.started=!1,n.showResults=!1,n.selectTrump=!1,n.deck=t.newDeck(),n.trump=""},n.start=function(){n.player1=e.newPlayer("ARD",0),n.player2=e.newPlayer("BRD",0),n.players=[n.player1,n.player2],n.currentPlayer,n.currentPlayCards=[],n.started=!0,n.showResults=!1,n.decide8()},n.nextPlayer=function(){var a;return a=n.players.shift(),n.players.push(a),n.currentPlayer=a,a},n.decide8=function(){n.deck.reset();var a,e,t={next:function(){a=n.deck.deal(),e=n.nextPlayer(),"J"!==a.rank&&"H"!==a.suit?t.next():t.done()},done:function(){e.updateHandsTodo(8),n.players[0].updateHandsTodo(7)}};t.next(),n.deck.reset(),n.deal()},n.deal=function(){n.currentPlayer.changeScore(0),n.deck.reset();var e=0,t={next:function(){10>e?(a(function(){n.hit(!0),n.nextPlayer(),t.next()},500),e++):t.done()},done:function(){console.log("done")}};t.next(),n.selectTrump=!0,n.play()},n.setTrump=function(a){n.trump=a,n.selectTrump=!1},n.getTrumpSuit=function(){var a;switch(escape(n.trump)){case"%u2663":a="C";break;case"%u2666":a="D";break;case"%u2660":a="S";break;case"%u2665":a="H"}return a},n.play=function(a,e){var t=!1;if(n.currentPlayer===e){if(n.currentPlayCards.push(n.currentPlayer.playCard(a)),2===n.currentPlayCards.length){var s=r.checkWinningCard(n.currentPlayCards[0],n.currentPlayCards[1],n.getTrumpSuit());s==n.currentPlayCards[0]?n.players[0].changeScore(1):(n.currentPlayer.changeScore(1),n.nextPlayer()),0==n.currentPlayer.cards.length&&(t=!0),s=null,n.currentPlayCards=[]}t?n.end():n.nextPlayer()}},n.hit=function(a){var e=n.deck.deal();n.dealCardToPlayer(e,a,function(){})},n.dealCardToPlayer=function(e,t,r){t?(e.hideValue=!0,n.currentPlayer.addCard(e),a(function(){e.hideValue=!1,r()},250)):(n.currentPlayer.addCard(e),r())},n.end=function(){n.currentPlayer=n.player1.getScore()>n.player2.getScore()?n.player1:n.player2,n.results=n.player1.getScore()>n.player2.getScore()?n.player1.name:n.player2.name,n.results+=" WINS!",a(function(){n.showResults=!0},500)},n.reset=function(){n.player1=null,n.player2=null,n.init()},n.init()}var e="saathaath.game",t="GameController";angular.module(e).controller(t,a),a.$inject=["$timeout","PlayerService","CardService","GameService"]}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"app/game/game.directive.html",controller:"GameController",controllerAs:"game"}}var e="saathaath.game",t="saathaathGame";angular.module(e).directive(t,a)}(),function(){"use strict";function a(){function a(a,e,t){var r=["J","Q","K","A"],n={J:10,Q:11,K:12,A:13};if(a.suit===t&&e.suit!==t)return a;if(a.suit!==t&&e.suit===t)return e;if(e.suit!==a.suit)return a;var s,c;return s=-1!==r.indexOf(a.rank)?Number(n[a.rank]):Number(a.rank),c=-1!==r.indexOf(e.rank)?Number(n[e.rank]):Number(e.rank),s>c?a:e}var e={checkWinningCard:a};return e}var e="saathaath.game",t="GameService";angular.module(e).factory(t,a)}(),function(){"use strict";function a(){function a(a,e){this.score=e,this.initialScore=e,this.name=a,this.cards=[],this.handsTodo}function e(e,t){var r=new a(e,t);return r}var t={newPlayer:e};return a.prototype.changeScore=function(a){angular.isDefined(this.score)||(this.score=this.initialScore),this.score+=a},a.prototype.getScore=function(){return this.score},a.prototype.resetScore=function(){this.score=this.initialScore},a.prototype.addCard=function(a){angular.isObject(a)&&this.cards.push(a)},a.prototype.playCard=function(a){var e;return-1!=this.cards.indexOf(a)&&(e=this.cards.splice(this.cards.indexOf(a),1)),e[0]},a.prototype.updateHandsTodo=function(a){angular.isNumber(a)&&(this.handsTodo=a)},a.prototype.getHandsTodo=function(){return this.handsTodo},a.prototype.resetCards=function(){this.cards=[]},t}var e="saathaath.player",t="PlayerService";angular.module(e).factory(t,a)}(),angular.module("saathaath").run(["$templateCache",function(a){a.put("app/card/card.directive.html",'<md-card class="card md-whiteframe-3dp {{vm.suit}} {{vm.cardIndexClass}}" ng-class="{\'md-whiteframe-15dp\' : vm.hoverCard}" ng-if=!vm.card.hideValue ng-mouseenter=vm.toggleHover() ng-mouseleave=vm.toggleHover() ng-click=vm.onCardSelected()><p>{{vm.rank}}</p></md-card><md-card class="card back" ng-class=vm.cardIndexClass ng-if=vm.card.hideValue></md-card>'),a.put("app/game/game.directive.html",'<div><div class=card-table><div class=game-results ng-if=!game.started><div class=result-text><button class="btn btn-primary" ng-click=game.start()>Start</button></div></div><div class=game-results ng-if=game.showResults><div class=result-text>{{game.results}}</div></div><div class=select-trump ng-if=game.selectTrump><div class=title>:Select Trump:</div><div class=trump-text><span ng-click="game.setTrump(\'&clubs;\')">&clubs;</span> <span style=color:red; ng-click="game.setTrump(\'&diams;\')">&diams;</span> <span ng-click="game.setTrump(\'&spades;\')">&spades;</span> <span style=color:red; ng-click="game.setTrump(\'&hearts;\')">&hearts;</span></div></div><div class=playing-area><div class=hand><saathaath-hand cards=game.player2.cards callback=game.play(card,game.player2)></saathaath-hand></div><div class=hand-spacer></div><div class="player-hand hand"><saathaath-hand cards=game.player1.cards callback=game.play(card,game.player1)></saathaath-hand></div></div><div class=scoreboard ng-if=game.started ng-class="{scorecontent: game.currentPlayer === game.player1}"><p class=title>Player:</p><p class=detail>{{game.player1.name}}</p><p class=title>HandsToDo:</p><p class=detail>{{game.player1.getHandsTodo()}}</p><p class=title>Score:</p><p class=detail>{{game.player1.getScore()}}</p></div><div class=gametrump ng-if="game.started && game.trump"><p class=title>Trump</p><p class=detail ng-style="[\'&diams;\',\'&hearts;\'].indexOf(game.trump) > -1 ? {color:\'red\'}:{color:\'black\'}">{{game.trump}}</p></div><div class=scoreboard2 ng-if=game.started ng-class="{scorecontent: game.currentPlayer === game.player2}"><p class=title>Player:</p><p class=detail>{{game.player2.name}}</p><p class=title>HandsToDo:</p><p class=detail>{{game.player2.getHandsTodo()}}</p><p class=title>Score:</p><p class=detail>{{game.player2.getScore()}}</p></div><div class=action-bar><button class="btn btn-primary" ng-click=game.reset()>Restart</button></div></div></div>'),a.put("app/layout/shell.html","<md-content><section layout=row><md-toolbar><div class=md-toolbar-tools><md-button ng-click=\"shellvm.toggleSidenav('left')\" hide-gt-sm class=md-icon-button><md-icon aria-label=Menu>menu</md-icon></md-button><h1><md-icon aria-label=Phone>games</md-icon>Saath Aath</h1></div></md-toolbar></section><section><saathaath-game></saathaath-game></section></md-content>")}]);