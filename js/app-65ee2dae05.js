/**
 * saath-aath - Popular Indian Card Game 78.
 * @authors 
 * @version v1.0.0
 * @link https://github.com/abhijitdarji/saath-aath#readme
 * @license ISC
 */
!function(){"use strict";var a="saathaath";angular.module(a,["ngMaterial","ngAnimate","saathaath.card","saathaath.game","saathaath.player"]).config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("indigo").accentPalette("orange")}])}(),function(){"use strict";var a="saathaath.card";angular.module(a,[])}(),function(){"use strict";var a="saathaath.game";angular.module(a,[])}(),function(){"use strict";var a="saathaath.player";angular.module(a,[])}(),function(){"use strict";function a(){var a={restrict:"E",template:'<div class="compareCards"><saathaath-card ng-repeat="card in cards track by $index" card="card" class="compare-index-{{$index}}" card-index="0"></saathaath-card></div>',scope:{cards:"="}};return a}var e="saathaath.card",t="saathaathCompare";angular.module(e).directive(t,a)}(),function(){"use strict";function a(a){var e={restrict:"E",templateUrl:"app/card/card.directive.html",scope:{card:"=",cardIndex:"@",getCard:"&"},controller:"SaathaathCardController",controllerAs:"vm",bindToController:!0};return e}function e(a){var e=this;e.hoverCard=!1,e.toggleHover=function(){e.hoverCard=!e.hoverCard},e.onCardSelected=function(){e.getCard({card:e.card})},e.init=function(){e.displayCard()},e.displayCard=function(){e.cardIndexClass="card-index-"+e.cardIndex},e.init()}var t="saathaath.card",r="saathaathCard",n="SaathaathCardController";angular.module(t).directive(r,a).controller(n,e),a.$inject=["$window"],e.$inject=["$scope"]}(),function(){"use strict";function a(){var a={restrict:"E",template:'<div class="playingCards"><saathaath-card ng-repeat="card in ch.cards track by $index" card="card" card-index="{{$index}}" get-card="ch.callback({card:card})"></saathaath-card></div>',scope:{cards:"=",callback:"&"},controller:function(){},controllerAs:"ch",bindToController:!0};return a}var e="saathaath.card",t="saathaathHand";angular.module(e).directive(t,a)}(),function(){"use strict";function a(){function a(){var a=new e;return a}function e(){var a=this;this.cards=[],this.dealt=[],a.suits.forEach(function(e){a.ranks.forEach(function(r){if(-1===a.ignoredCards.indexOf(r.symbol)&&-1===a.ignoredCards.indexOf(r.symbol+e.name)){var n=new t(r,e);a.cards.push(n)}})}),a.shuffle()}function t(a,e){this.rank=a,this.suit=e}var r={newDeck:a,Deck:e,Card:t},n={club:{name:"club",symbol:"♣",color:"black"},diamond:{name:"diamond",symbol:"♦",color:"red"},spade:{name:"spade",symbol:"♠",color:"black"},heart:{name:"heart",symbol:"♥",color:"red"}},s=[n.club,n.diamond,n.spade,n.heart],c={ace:{name:"ace",symbol:"A",value:14},two:{name:"two",symbol:"2",value:2},three:{name:"three",symbol:"3",value:3},four:{name:"four",symbol:"4",value:4},five:{name:"five",symbol:"5",value:5},six:{name:"six",symbol:"6",value:6},seven:{name:"seven",symbol:"7",value:7},eight:{name:"eight",symbol:"8",value:8},nine:{name:"nine",symbol:"9",value:9},ten:{name:"ten",symbol:"10",value:10},jack:{name:"jack",symbol:"J",value:11},queen:{name:"queen",symbol:"Q",value:12},king:{name:"king",symbol:"K",value:13}},i=[c.ace,c.two,c.three,c.four,c.five,c.six,c.seven,c.eight,c.nine,c.ten,c.jack,c.queen,c.king];return e.prototype.suits=s,e.prototype.ranks=i,e.prototype.ignoredCards=["2","3","4","5","6","7club","7diamond"],e.prototype.deal=function(){var a=this.cards.shift();return angular.isDefined(a)?(this.dealt.push(a),a):!1},e.prototype.shuffle=function(){for(var a,e,t=this.cards.length;0!==t;)e=Math.floor(Math.random()*t),t-=1,a=this.cards[t],this.cards[t]=this.cards[e],this.cards[e]=a},e.prototype.reset=function(){this.cards=this.cards.concat(this.dealt),this.dealt=[],this.shuffle()},t.prototype.name=function(){return this.rank+" "+this.suit},r}var e="saathaath.card",t="CardService";angular.module(e).factory(t,a)}(),function(){"use strict";function a(a,e,t,r){var n=this;n.init=function(){n.started=!1,n.showResults=!1,n.selectTrump=!1,n.canPlay=!1,n.deck=t.newDeck(),n.trump=""},n.start=function(){n.player1=e.newPlayer("Player1",0),n.player2=e.newPlayer("Player2",0),n.players=[n.player1,n.player2],n.currentPlayer,n.currentPlayCards=[],n.started=!0,n.showResults=!1,n.decide8()},n.nextPlayer=function(){var a;return a=n.players.shift(),n.players.push(a),n.currentPlayer=a,a},n.decide8=function(){n.deck.reset();var a,e,t={next:function(){a=n.deck.deal(),e=n.nextPlayer(),"jack"!==a.rank.name&&"heart"!==a.suit.name?t.next():t.done()},done:function(){e.updateHandsTodo(8),n.players[0].updateHandsTodo(7)}};t.next(),n.deck.reset(),n.dealHand()},n.dealHand=function(){n.currentPlayer.changeScore(0),n.deck.reset();var e=0,t={next:function(){10>e?(a(function(){n.hit(!0),n.nextPlayer(),t.next()},500),e++):t.done()},done:function(){a(function(){n.selectTrump=!0},500)}};t.next()},n.setTrump=function(a){n.trump=a,n.selectTrump=!1,n.dealTable()},n.dealTable=function(){var e=0,t={next:function(){10>e&&(a(function(){n.hit(!1),n.nextPlayer(),t.next()},500),e++),e>=10&&20>e?(a(function(){n.hit(!0),n.nextPlayer(),t.next()},500),e++):t.done()},done:function(){a(function(){n.canPlay=!0},500)}};t.next()},n.getTrumpSuit=function(){var a;switch(escape(n.trump)){case"%u2663":a="club";break;case"%u2666":a="diamond";break;case"%u2660":a="spade";break;case"%u2665":a="heart"}return a},n.play=function(e,t){var s=!1;if(n.canPlay&&n.currentPlayer===t){var c=n.currentPlayer.cards.indexOf(e);if(n.currentPlayCards.push(n.currentPlayer.playCard(e)),console.log(n.currentPlayer.cardsLeft()),c>9&&14>=c&&(n.currentPlayer.cards[c-5].hideValue=!1),2===n.currentPlayCards.length){var i=r.checkWinningCard(n.currentPlayCards[0],n.currentPlayCards[1],n.getTrumpSuit());i==n.currentPlayCards[0]?n.players[0].changeScore(1):(n.currentPlayer.changeScore(1),n.nextPlayer()),0==n.currentPlayer.cardsLeft()&&(s=!0),i=null,a(function(){n.currentPlayCards=[]},1e3)}s?a(function(){n.end()},500):n.nextPlayer()}},n.hit=function(a){var e=n.deck.deal();n.dealCardToPlayer(e,a,function(){})},n.dealCardToPlayer=function(e,t,r){t?(e.hideValue=!0,n.currentPlayer.addCard(e),a(function(){e.hideValue=!1,r()},250)):(e.hideValue=!0,n.currentPlayer.addCard(e),r())},n.end=function(){n.currentPlayer=n.player1.getScore()>n.player2.getScore()?n.player1:n.player2,n.results=n.currentPlayer.name,n.results+=" WINS!",a(function(){n.showResults=!0},500)},n.reset=function(){n.player1=null,n.player2=null,n.init()},n.init()}var e="saathaath.game",t="GameController";angular.module(e).controller(t,a),a.$inject=["$timeout","PlayerService","CardService","GameService"]}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"app/game/game.directive.html",controller:"GameController",controllerAs:"game"}}var e="saathaath.game",t="saathaathGame";angular.module(e).directive(t,a)}(),function(){"use strict";function a(){function a(a,e,t){return a.suit.name===t&&e.suit.name!==t?a:a.suit.name!==t&&e.suit.name===t?e:e.suit.name!==a.suit.name?a:a.rank.value>e.rank.value?a:e}var e={checkWinningCard:a};return e}var e="saathaath.game",t="GameService";angular.module(e).factory(t,a)}(),function(){"use strict";function a(){function a(a,e){this.score=e,this.initialScore=e,this.name=a,this.cards=[],this.handsTodo}function e(e,t){var r=new a(e,t);return r}var t={newPlayer:e};return a.prototype.changeScore=function(a){angular.isDefined(this.score)||(this.score=this.initialScore),this.score+=a},a.prototype.getScore=function(){return this.score},a.prototype.resetScore=function(){this.score=this.initialScore},a.prototype.addCard=function(a){angular.isObject(a)&&this.cards.push(a)},a.prototype.playCard=function(a){var e,t=this.cards.indexOf(a);return-1!=t&&(e=this.cards[t],this.cards[t]=null),e},a.prototype.updateHandsTodo=function(a){angular.isNumber(a)&&(this.handsTodo=a)},a.prototype.getHandsTodo=function(){return this.handsTodo},a.prototype.resetCards=function(){this.cards=[]},a.prototype.cardsLeft=function(){return this.cards.filter(function(a){return void 0!=a}).length},t}var e="saathaath.player",t="PlayerService";angular.module(e).factory(t,a)}(),angular.module("saathaath").run(["$templateCache",function(a){a.put("app/card/card.directive.html",'<md-card class="card md-whiteframe-3dp {{vm.cardIndexClass}}" ng-class="{\'md-whiteframe-15dp\' : vm.hoverCard}" ng-if="vm.card != null && !vm.card.hideValue" ng-mouseenter=vm.toggleHover() ng-mouseleave=vm.toggleHover() ng-click=vm.onCardSelected()><div class=card-{{vm.card.rank.name}} style=color:{{vm.card.suit.color}}><div class="corner top"><span class=number>{{vm.card.rank.symbol}}</span> <span>{{vm.card.suit.symbol}}</span></div><span class="suit top_left" ng-if="([4,5,6,7,8,9,10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit top_center" ng-if="([2].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit top_right" ng-if="([4,5,6,7,8,9,10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_top_left" ng-if="([9,10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_top_center" ng-if="([10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_left" ng-if="([6,7,8].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_top" ng-if="([7,8].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_center" ng-if="([3,5,9].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_top_right" ng-if="([9,10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_bottom" ng-if="([8].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_right" ng-if="([6,7,8].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit bottom_left" ng-if="([4,5,6,7,8,9,10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit bottom_center" ng-if="([2].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit bottom_right" ng-if="([4,5,6,7,8,9,10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_bottom_left" ng-if="([9,10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_bottom_center" ng-if="([10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span> <span class="suit middle_bottom_right" ng-if="([9,10].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span><span class="face middle_center" ng-if="([11,12,13].indexOf(vm.card.rank.value) > -1)"><img ng-src=images/faces/face-{{vm.card.rank.name}}-{{vm.card.suit.name}}.png></span><span class="suit middle_center" ng-if="([14].indexOf(vm.card.rank.value) > -1)">{{vm.card.suit.symbol}}</span><div class="corner bottom"><span class=number>{{vm.card.rank.symbol}}</span> <span>{{vm.card.suit.symbol}}</span></div></div></md-card><md-card class="card back" ng-class=vm.cardIndexClass ng-if="vm.card != null && vm.card.hideValue"></md-card>'),a.put("app/game/game.directive.html",'<div><div class=card-table><div class=game-results ng-if=!game.started><div class=result-text><md-button class="md-raised md-accent" style="line-height: 175px;font-size: 150px;" ng-click=game.start()>Start</md-button></div></div><div class=game-results ng-if=game.showResults><div class=result-text>{{game.results}}</div></div><div class=select-trump ng-if=game.selectTrump><div class=title>:Select Trump:</div><div class=trump-text><span ng-click="game.setTrump(\'&clubs;\')">&clubs;</span> <span style=color:red; ng-click="game.setTrump(\'&diams;\')">&diams;</span> <span ng-click="game.setTrump(\'&spades;\')">&spades;</span> <span style=color:red; ng-click="game.setTrump(\'&hearts;\')">&hearts;</span></div></div><div class=playing-area><div class=hand><saathaath-hand cards=game.player2.cards callback=game.play(card,game.player2)></saathaath-hand></div><div class=hand-spacer><div style=float:left;><saathaath-compare cards=game.currentPlayCards></saathaath-compare></div></div><div class="player-hand hand"><saathaath-hand cards=game.player1.cards callback=game.play(card,game.player1)></saathaath-hand></div></div><div class=scoreboard ng-if=game.started ng-class="{scorecontent: game.currentPlayer === game.player1}"><p class=title>Player:</p><p class=detail>{{game.player1.name}}</p><p class=title>HandsToDo:</p><p class=detail>{{game.player1.getHandsTodo()}}</p><p class=title>Score:</p><p class=detail>{{game.player1.getScore()}}</p></div><div class=gametrump ng-if="game.started && game.trump"><p class=title>Trump</p><p class=detail ng-style="[\'&diams;\',\'&hearts;\'].indexOf(game.trump) > -1 ? {color:\'red\'}:{color:\'black\'}">{{game.trump}}</p></div><div class=scoreboard2 ng-if=game.started ng-class="{scorecontent: game.currentPlayer === game.player2}"><p class=title>Player:</p><p class=detail>{{game.player2.name}}</p><p class=title>HandsToDo:</p><p class=detail>{{game.player2.getHandsTodo()}}</p><p class=title>Score:</p><p class=detail>{{game.player2.getScore()}}</p></div><div class=action-bar></div></div></div>'),a.put("app/layout/shell.html",'<md-content><section layout=row><md-toolbar><div class=md-toolbar-tools><md-button ng-click="shellvm.toggleSidenav(\'left\')" hide-gt-sm class=md-icon-button><md-icon aria-label=Menu>menu</md-icon></md-button><h1><md-icon aria-label=Phone>games</md-icon>Saath Aath</h1><span flex></span><md-button class="md-fab md-mini" aria-label=Restart ng-click=game.reset()><md-tooltip md-direction=left>Restart</md-tooltip><md-icon>replay</md-icon></md-button></div></md-toolbar></section><section><saathaath-game></saathaath-game></section></md-content>')}]);